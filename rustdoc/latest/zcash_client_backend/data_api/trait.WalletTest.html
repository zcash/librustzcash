<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Read-only operations required for testing light wallet functions."><title>WalletTest in zcash_client_backend::data_api - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-ca0dd0c4.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="zcash_client_backend" data-themes="" data-resource-suffix="" data-rustdoc-version="1.93.0-nightly (d5419f1e9 2025-10-30)" data-channel="nightly" data-search-js="search-6acd48a0.js" data-stringdex-js="stringdex-c3e638e9.js" data-settings-js="settings-c38705f0.js" ><script src="../../static.files/storage-e2aeef58.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-ce535bd0.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">WalletTest</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../zcash_client_backend/index.html">zcash_<wbr>client_<wbr>backend</a><span class="version">0.20.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Wallet<wbr>Test</a></h2><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.get_checkpoint_history" title="get_checkpoint_history">get_checkpoint_history</a></li><li><a href="#tymethod.get_notes" title="get_notes">get_notes</a></li><li><a href="#tymethod.get_sent_note_ids" title="get_sent_note_ids">get_sent_note_ids</a></li><li><a href="#tymethod.get_sent_outputs" title="get_sent_outputs">get_sent_outputs</a></li><li><a href="#tymethod.get_tx_history" title="get_tx_history">get_tx_history</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.finally" title="finally">finally</a></li><li><a href="#method.find_account_for_ephemeral_address" title="find_account_for_ephemeral_address">find_account_for_ephemeral_address</a></li><li><a href="#method.get_known_ephemeral_addresses" title="get_known_ephemeral_addresses">get_known_ephemeral_addresses</a></li><li><a href="#method.get_transparent_output" title="get_transparent_output">get_transparent_output</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2><a href="index.html">In zcash_<wbr>client_<wbr>backend::<wbr>data_<wbr>api</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">zcash_client_backend</a>::<wbr><a href="index.html">data_api</a></div><h1>Trait <span class="trait">Wallet<wbr>Test</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/zcash_client_backend/data_api.rs.html#1908-2057">Source</a> </span></div><pre class="rust item-decl"><code>pub trait WalletTest: <a class="trait" href="trait.InputSource.html" title="trait zcash_client_backend::data_api::InputSource">InputSource</a> + <a class="trait" href="trait.WalletRead.html" title="trait zcash_client_backend::data_api::WalletRead">WalletRead</a> {
    // Required methods
    fn <a href="#tymethod.get_tx_history" class="fn">get_tx_history</a>(
        &amp;self,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="testing/struct.TransactionSummary.html" title="struct zcash_client_backend::data_api::testing::TransactionSummary">TransactionSummary</a>&lt;&lt;Self as <a class="trait" href="trait.WalletRead.html" title="trait zcash_client_backend::data_api::WalletRead">WalletRead</a>&gt;::<a class="associatedtype" href="trait.WalletRead.html#associatedtype.AccountId" title="type zcash_client_backend::data_api::WalletRead::AccountId">AccountId</a>&gt;&gt;, &lt;Self as <a class="trait" href="trait.WalletRead.html" title="trait zcash_client_backend::data_api::WalletRead">WalletRead</a>&gt;::<a class="associatedtype" href="trait.WalletRead.html#associatedtype.Error" title="type zcash_client_backend::data_api::WalletRead::Error">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.get_sent_note_ids" class="fn">get_sent_note_ids</a>(
        &amp;self,
        _txid: &amp;TxId,
        _protocol: ShieldedProtocol,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../wallet/struct.NoteId.html" title="struct zcash_client_backend::wallet::NoteId">NoteId</a>&gt;, &lt;Self as <a class="trait" href="trait.WalletRead.html" title="trait zcash_client_backend::data_api::WalletRead">WalletRead</a>&gt;::<a class="associatedtype" href="trait.WalletRead.html#associatedtype.Error" title="type zcash_client_backend::data_api::WalletRead::Error">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.get_sent_outputs" class="fn">get_sent_outputs</a>(
        &amp;self,
        txid: &amp;TxId,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="struct.OutputOfSentTx.html" title="struct zcash_client_backend::data_api::OutputOfSentTx">OutputOfSentTx</a>&gt;, &lt;Self as <a class="trait" href="trait.WalletRead.html" title="trait zcash_client_backend::data_api::WalletRead">WalletRead</a>&gt;::<a class="associatedtype" href="trait.WalletRead.html#associatedtype.Error" title="type zcash_client_backend::data_api::WalletRead::Error">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.get_checkpoint_history" class="fn">get_checkpoint_history</a>(
        &amp;self,
        protocol: &amp;ShieldedProtocol,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;(BlockHeight, <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Position&gt;)&gt;, &lt;Self as <a class="trait" href="trait.WalletRead.html" title="trait zcash_client_backend::data_api::WalletRead">WalletRead</a>&gt;::<a class="associatedtype" href="trait.WalletRead.html#associatedtype.Error" title="type zcash_client_backend::data_api::WalletRead::Error">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.get_notes" class="fn">get_notes</a>(
        &amp;self,
        protocol: ShieldedProtocol,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../wallet/struct.ReceivedNote.html" title="struct zcash_client_backend::wallet::ReceivedNote">ReceivedNote</a>&lt;Self::<a class="associatedtype" href="trait.InputSource.html#associatedtype.NoteRef" title="type zcash_client_backend::data_api::InputSource::NoteRef">NoteRef</a>, <a class="enum" href="../wallet/enum.Note.html" title="enum zcash_client_backend::wallet::Note">Note</a>&gt;&gt;, &lt;Self as <a class="trait" href="trait.InputSource.html" title="trait zcash_client_backend::data_api::InputSource">InputSource</a>&gt;::<a class="associatedtype" href="trait.InputSource.html#associatedtype.Error" title="type zcash_client_backend::data_api::InputSource::Error">Error</a>&gt;;

    // Provided methods
    fn <a href="#method.get_transparent_output" class="fn">get_transparent_output</a>(
        &amp;self,
        _outpoint: &amp;OutPoint,
        _spendable_as_of: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="wallet/struct.TargetHeight.html" title="struct zcash_client_backend::data_api::wallet::TargetHeight">TargetHeight</a>&gt;,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../wallet/struct.WalletTransparentOutput.html" title="struct zcash_client_backend::wallet::WalletTransparentOutput">WalletTransparentOutput</a>&gt;, &lt;Self as <a class="trait" href="trait.InputSource.html" title="trait zcash_client_backend::data_api::InputSource">InputSource</a>&gt;::<a class="associatedtype" href="trait.InputSource.html#associatedtype.Error" title="type zcash_client_backend::data_api::InputSource::Error">Error</a>&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.get_known_ephemeral_addresses" class="fn">get_known_ephemeral_addresses</a>(
        &amp;self,
        _account: &lt;Self as <a class="trait" href="trait.WalletRead.html" title="trait zcash_client_backend::data_api::WalletRead">WalletRead</a>&gt;::<a class="associatedtype" href="trait.WalletRead.html#associatedtype.AccountId" title="type zcash_client_backend::data_api::WalletRead::AccountId">AccountId</a>,
        _index_range: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/core/ops/range/struct.Range.html" title="struct core::ops::range::Range">Range</a>&lt;NonHardenedChildIndex&gt;&gt;,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;(TransparentAddress, <a class="struct" href="../wallet/struct.TransparentAddressMetadata.html" title="struct zcash_client_backend::wallet::TransparentAddressMetadata">TransparentAddressMetadata</a>)&gt;, &lt;Self as <a class="trait" href="trait.WalletRead.html" title="trait zcash_client_backend::data_api::WalletRead">WalletRead</a>&gt;::<a class="associatedtype" href="trait.WalletRead.html#associatedtype.Error" title="type zcash_client_backend::data_api::WalletRead::Error">Error</a>&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.find_account_for_ephemeral_address" class="fn">find_account_for_ephemeral_address</a>(
        &amp;self,
        address: &amp;TransparentAddress,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&lt;Self as <a class="trait" href="trait.WalletRead.html" title="trait zcash_client_backend::data_api::WalletRead">WalletRead</a>&gt;::<a class="associatedtype" href="trait.WalletRead.html#associatedtype.AccountId" title="type zcash_client_backend::data_api::WalletRead::AccountId">AccountId</a>&gt;, &lt;Self as <a class="trait" href="trait.WalletRead.html" title="trait zcash_client_backend::data_api::WalletRead">WalletRead</a>&gt;::<a class="associatedtype" href="trait.WalletRead.html#associatedtype.Error" title="type zcash_client_backend::data_api::WalletRead::Error">Error</a>&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.finally" class="fn">finally</a>(&amp;self) { ... }
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Read-only operations required for testing light wallet functions.</p>
<p>These methods expose internal details or unstable interfaces, primarily to enable use
of the <a href="testing/index.html" title="mod zcash_client_backend::data_api::testing"><code>testing</code></a> framework. They should not be used in production software.</p>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.get_tx_history" class="method"><a class="src rightside" href="../../src/zcash_client_backend/data_api.rs.html#1914-1919">Source</a><h4 class="code-header">fn <a href="#tymethod.get_tx_history" class="fn">get_tx_history</a>(
    &amp;self,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="testing/struct.TransactionSummary.html" title="struct zcash_client_backend::data_api::testing::TransactionSummary">TransactionSummary</a>&lt;&lt;Self as <a class="trait" href="trait.WalletRead.html" title="trait zcash_client_backend::data_api::WalletRead">WalletRead</a>&gt;::<a class="associatedtype" href="trait.WalletRead.html#associatedtype.AccountId" title="type zcash_client_backend::data_api::WalletRead::AccountId">AccountId</a>&gt;&gt;, &lt;Self as <a class="trait" href="trait.WalletRead.html" title="trait zcash_client_backend::data_api::WalletRead">WalletRead</a>&gt;::<a class="associatedtype" href="trait.WalletRead.html#associatedtype.Error" title="type zcash_client_backend::data_api::WalletRead::Error">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Returns a vector of transaction summaries.</p>
<p>Currently test-only, as production use could return a very large number of results; either
pagination or a streaming design will be necessary to stabilize this feature for production
use.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.get_sent_note_ids" class="method"><a class="src rightside" href="../../src/zcash_client_backend/data_api.rs.html#1923-1927">Source</a><h4 class="code-header">fn <a href="#tymethod.get_sent_note_ids" class="fn">get_sent_note_ids</a>(
    &amp;self,
    _txid: &amp;TxId,
    _protocol: ShieldedProtocol,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../wallet/struct.NoteId.html" title="struct zcash_client_backend::wallet::NoteId">NoteId</a>&gt;, &lt;Self as <a class="trait" href="trait.WalletRead.html" title="trait zcash_client_backend::data_api::WalletRead">WalletRead</a>&gt;::<a class="associatedtype" href="trait.WalletRead.html#associatedtype.Error" title="type zcash_client_backend::data_api::WalletRead::Error">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Returns the note IDs for shielded notes sent by the wallet in a particular
transaction.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.get_sent_outputs" class="method"><a class="src rightside" href="../../src/zcash_client_backend/data_api.rs.html#1931-1934">Source</a><h4 class="code-header">fn <a href="#tymethod.get_sent_outputs" class="fn">get_sent_outputs</a>(
    &amp;self,
    txid: &amp;TxId,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="struct.OutputOfSentTx.html" title="struct zcash_client_backend::data_api::OutputOfSentTx">OutputOfSentTx</a>&gt;, &lt;Self as <a class="trait" href="trait.WalletRead.html" title="trait zcash_client_backend::data_api::WalletRead">WalletRead</a>&gt;::<a class="associatedtype" href="trait.WalletRead.html#associatedtype.Error" title="type zcash_client_backend::data_api::WalletRead::Error">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Returns the outputs for a transaction sent by the wallet.</p>
</div></details><section id="tymethod.get_checkpoint_history" class="method"><a class="src rightside" href="../../src/zcash_client_backend/data_api.rs.html#1937-1943">Source</a><h4 class="code-header">fn <a href="#tymethod.get_checkpoint_history" class="fn">get_checkpoint_history</a>(
    &amp;self,
    protocol: &amp;ShieldedProtocol,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;(BlockHeight, <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Position&gt;)&gt;, &lt;Self as <a class="trait" href="trait.WalletRead.html" title="trait zcash_client_backend::data_api::WalletRead">WalletRead</a>&gt;::<a class="associatedtype" href="trait.WalletRead.html#associatedtype.Error" title="type zcash_client_backend::data_api::WalletRead::Error">Error</a>&gt;</h4></section><details class="toggle method-toggle" open><summary><section id="tymethod.get_notes" class="method"><a class="src rightside" href="../../src/zcash_client_backend/data_api.rs.html#1968-1971">Source</a><h4 class="code-header">fn <a href="#tymethod.get_notes" class="fn">get_notes</a>(
    &amp;self,
    protocol: ShieldedProtocol,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../wallet/struct.ReceivedNote.html" title="struct zcash_client_backend::wallet::ReceivedNote">ReceivedNote</a>&lt;Self::<a class="associatedtype" href="trait.InputSource.html#associatedtype.NoteRef" title="type zcash_client_backend::data_api::InputSource::NoteRef">NoteRef</a>, <a class="enum" href="../wallet/enum.Note.html" title="enum zcash_client_backend::wallet::Note">Note</a>&gt;&gt;, &lt;Self as <a class="trait" href="trait.InputSource.html" title="trait zcash_client_backend::data_api::InputSource">InputSource</a>&gt;::<a class="associatedtype" href="trait.InputSource.html#associatedtype.Error" title="type zcash_client_backend::data_api::InputSource::Error">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Returns all the notes that have been received by the wallet.</p>
</div></details></div><h2 id="provided-methods" class="section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.get_transparent_output" class="method"><a class="src rightside" href="../../src/zcash_client_backend/data_api.rs.html#1957-1965">Source</a><h4 class="code-header">fn <a href="#method.get_transparent_output" class="fn">get_transparent_output</a>(
    &amp;self,
    _outpoint: &amp;OutPoint,
    _spendable_as_of: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="wallet/struct.TargetHeight.html" title="struct zcash_client_backend::data_api::wallet::TargetHeight">TargetHeight</a>&gt;,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../wallet/struct.WalletTransparentOutput.html" title="struct zcash_client_backend::wallet::WalletTransparentOutput">WalletTransparentOutput</a>&gt;, &lt;Self as <a class="trait" href="trait.InputSource.html" title="trait zcash_client_backend::data_api::InputSource">InputSource</a>&gt;::<a class="associatedtype" href="trait.InputSource.html#associatedtype.Error" title="type zcash_client_backend::data_api::InputSource::Error">Error</a>&gt;</h4></section><span class="item-info"><div class="stab portability">Available on <strong>crate feature <code>transparent-inputs</code></strong> only.</div></span></summary><div class="docblock"><p>Fetches the transparent output corresponding to the provided <code>outpoint</code>.
Allows selecting unspendable outputs for testing purposes.</p>
<h5 id="parameters"><a class="doc-anchor" href="#parameters">§</a>Parameters</h5>
<ul>
<li><code>outpoint</code>: The identifier for the output to be retrieved.</li>
<li><code>spendable_as_of</code>: The target height of a transaction under construction that will spend the
returned output. If this is <code>None</code>, no spendability checks are performed.</li>
</ul>
<p>Returns <code>Ok(None)</code> if the UTXO is not known to belong to the wallet or if <code>spendable_as_of</code>
is set and the output is available to be spent by the wallet in a transaction that is
intended to be mined at the target height.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.get_known_ephemeral_addresses" class="method"><a class="src rightside" href="../../src/zcash_client_backend/data_api.rs.html#2007-2016">Source</a><h4 class="code-header">fn <a href="#method.get_known_ephemeral_addresses" class="fn">get_known_ephemeral_addresses</a>(
    &amp;self,
    _account: &lt;Self as <a class="trait" href="trait.WalletRead.html" title="trait zcash_client_backend::data_api::WalletRead">WalletRead</a>&gt;::<a class="associatedtype" href="trait.WalletRead.html#associatedtype.AccountId" title="type zcash_client_backend::data_api::WalletRead::AccountId">AccountId</a>,
    _index_range: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/core/ops/range/struct.Range.html" title="struct core::ops::range::Range">Range</a>&lt;NonHardenedChildIndex&gt;&gt;,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;(TransparentAddress, <a class="struct" href="../wallet/struct.TransparentAddressMetadata.html" title="struct zcash_client_backend::wallet::TransparentAddressMetadata">TransparentAddressMetadata</a>)&gt;, &lt;Self as <a class="trait" href="trait.WalletRead.html" title="trait zcash_client_backend::data_api::WalletRead">WalletRead</a>&gt;::<a class="associatedtype" href="trait.WalletRead.html#associatedtype.Error" title="type zcash_client_backend::data_api::WalletRead::Error">Error</a>&gt;</h4></section><span class="item-info"><div class="stab portability">Available on <strong>crate feature <code>transparent-inputs</code></strong> only.</div></span></summary><div class="docblock"><p>Returns a vector of ephemeral transparent addresses associated with the given
account controlled by this wallet, along with their metadata. The result includes
reserved addresses, and addresses for the backend’s configured gap limit worth
of additional indices (capped to the maximum index).</p>
<p>If <code>index_range</code> is some <code>Range</code>, it limits the result to addresses with indices
in that range. An <code>index_range</code> of <code>None</code> is defined to be equivalent to
<code>0..(1u32 &lt;&lt; 31)</code>.</p>
<p>Wallets should scan the chain for UTXOs sent to these ephemeral transparent
receivers, but do not need to do so regularly. Under expected usage, outputs
would only be detected with these receivers in the following situations:</p>
<ul>
<li>
<p>This wallet created a payment to a ZIP 320 (TEX) address, but the second
transaction (that spent the output sent to the ephemeral address) did not get
mined before it expired.</p>
<ul>
<li>In this case the output will already be known to the wallet (because it
stores the transactions that it creates).</li>
</ul>
</li>
<li>
<p>Another wallet app using the same seed phrase created a payment to a ZIP 320
address, and this wallet queried for the ephemeral UTXOs after the first
transaction was mined but before the second transaction was mined.</p>
<ul>
<li>In this case, the output should not be considered unspent until the expiry
height of the transaction it was received in has passed. Wallets creating
payments to TEX addresses generally set the same expiry height for the first
and second transactions, meaning that this wallet does not need to observe
the second transaction to determine when it would have expired.</li>
</ul>
</li>
<li>
<p>A TEX address recipient decided to return funds that the wallet had sent to
them.</p>
</li>
</ul>
<p>In all cases, the wallet should re-shield the unspent outputs, in a separate
transaction per ephemeral address, before re-spending the funds.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.find_account_for_ephemeral_address" class="method"><a class="src rightside" href="../../src/zcash_client_backend/data_api.rs.html#2036-2050">Source</a><h4 class="code-header">fn <a href="#method.find_account_for_ephemeral_address" class="fn">find_account_for_ephemeral_address</a>(
    &amp;self,
    address: &amp;TransparentAddress,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&lt;Self as <a class="trait" href="trait.WalletRead.html" title="trait zcash_client_backend::data_api::WalletRead">WalletRead</a>&gt;::<a class="associatedtype" href="trait.WalletRead.html#associatedtype.AccountId" title="type zcash_client_backend::data_api::WalletRead::AccountId">AccountId</a>&gt;, &lt;Self as <a class="trait" href="trait.WalletRead.html" title="trait zcash_client_backend::data_api::WalletRead">WalletRead</a>&gt;::<a class="associatedtype" href="trait.WalletRead.html#associatedtype.Error" title="type zcash_client_backend::data_api::WalletRead::Error">Error</a>&gt;</h4></section><span class="item-info"><div class="stab portability">Available on <strong>crate feature <code>transparent-inputs</code></strong> only.</div></span></summary><div class="docblock"><p>If a given ephemeral address might have been reserved, i.e. would be included in
the result of <code>get_known_ephemeral_addresses(account_id, None)</code> for any of the
wallet’s accounts, then return <code>Ok(Some(account_id))</code>. Otherwise return <code>Ok(None)</code>.</p>
<p>This is equivalent to (but may be implemented more efficiently than):</p>

<div class="example-wrap compile_fail"><a href="#" class="tooltip" title="This example deliberately fails to compile">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">for </span>account_id <span class="kw">in </span><span class="self">self</span>.get_account_ids()<span class="question-mark">? </span>{
    <span class="kw">if </span><span class="self">self
        </span>.get_known_ephemeral_addresses(account_id, <span class="prelude-val">None</span>)<span class="question-mark">?
        </span>.into_iter()
        .any(|(known_addr, <span class="kw">_</span>)| <span class="kw-2">&amp;</span>known_addr == address)
    {
        <span class="kw">return </span><span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>(account_id));
    }
}
<span class="prelude-val">Ok</span>(<span class="prelude-val">None</span>)</code></pre></div></div></details><details class="toggle method-toggle" open><summary><section id="method.finally" class="method"><a class="src rightside" href="../../src/zcash_client_backend/data_api.rs.html#2056">Source</a><h4 class="code-header">fn <a href="#method.finally" class="fn">finally</a>(&amp;self)</h4></section></summary><div class="docblock"><p>Performs final checks at the conclusion of each test.</p>
<p>This method allows wallet backend developers to perform any necessary consistency
checks or cleanup. By default it does nothing.</p>
</div></details></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"></div><script src="../../trait.impl/zcash_client_backend/data_api/trait.WalletTest.js" async></script></section></div></main></body></html>