<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A strategy for selecting transaction inputs and proposing transaction outputs for shielding-only transactions (transactions which spend transparent UTXOs and send all transaction outputs to the wallet’s shielded internal address(es))."><title>ShieldingSelector in zcash_client_backend::data_api::wallet::input_selection - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-dbdb5eec.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="zcash_client_backend" data-themes="" data-resource-suffix="" data-rustdoc-version="1.85.0-nightly (d49be02cf 2024-12-02)" data-channel="nightly" data-search-js="search-92e6798f.js" data-settings-js="settings-0f613d39.js" ><script src="../../../../static.files/storage-59e33391.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../zcash_client_backend/index.html">zcash_<wbr>client_<wbr>backend</a><span class="version">0.15.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Shielding<wbr>Selector</a></h2><h3><a href="#required-associated-types">Required Associated Types</a></h3><ul class="block"><li><a href="#associatedtype.Error" title="Error">Error</a></li><li><a href="#associatedtype.InputSource" title="InputSource">InputSource</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.propose_shielding" title="propose_shielding">propose_shielding</a></li></ul><h3><a href="#dyn-compatibility">Dyn Compatibility</a></h3><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2><a href="index.html">In zcash_<wbr>client_<wbr>backend::<wbr>data_<wbr>api::<wbr>wallet::<wbr>input_<wbr>selection</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../../../index.html">zcash_client_backend</a>::<wbr><a href="../../index.html">data_api</a>::<wbr><a href="../index.html">wallet</a>::<wbr><a href="index.html">input_selection</a></span><h1>Trait <span class="trait">ShieldingSelector</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../../src/zcash_client_backend/data_api/wallet/input_selection.rs.html#208-250">Source</a> </span></div><pre class="rust item-decl"><code>pub trait ShieldingSelector {
    type <a href="#associatedtype.Error" class="associatedtype">Error</a>;
    type <a href="#associatedtype.InputSource" class="associatedtype">InputSource</a>: <a class="trait" href="../../trait.InputSource.html" title="trait zcash_client_backend::data_api::InputSource">InputSource</a>;

    // Required method
    fn <a href="#tymethod.propose_shielding" class="fn">propose_shielding</a>&lt;ParamsT, ChangeT&gt;(
        &amp;self,
        params: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;ParamsT</a>,
        wallet_db: &amp;Self::<a class="associatedtype" href="trait.ShieldingSelector.html#associatedtype.InputSource" title="type zcash_client_backend::data_api::wallet::input_selection::ShieldingSelector::InputSource">InputSource</a>,
        change_strategy: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;ChangeT</a>,
        shielding_threshold: NonNegativeAmount,
        source_addrs: &amp;[TransparentAddress],
        to_account: &lt;Self::<a class="associatedtype" href="trait.ShieldingSelector.html#associatedtype.InputSource" title="type zcash_client_backend::data_api::wallet::input_selection::ShieldingSelector::InputSource">InputSource</a> as <a class="trait" href="../../trait.InputSource.html" title="trait zcash_client_backend::data_api::InputSource">InputSource</a>&gt;::<a class="associatedtype" href="../../trait.InputSource.html#associatedtype.AccountId" title="type zcash_client_backend::data_api::InputSource::AccountId">AccountId</a>,
        target_height: BlockHeight,
        min_confirmations: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../../../proposal/struct.Proposal.html" title="struct zcash_client_backend::proposal::Proposal">Proposal</a>&lt;&lt;ChangeT as <a class="trait" href="../../../fees/trait.ChangeStrategy.html" title="trait zcash_client_backend::fees::ChangeStrategy">ChangeStrategy</a>&gt;::<a class="associatedtype" href="../../../fees/trait.ChangeStrategy.html#associatedtype.FeeRule" title="type zcash_client_backend::fees::ChangeStrategy::FeeRule">FeeRule</a>, <a class="enum" href="https://doc.rust-lang.org/nightly/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a>&gt;, <a class="enum" href="enum.InputSelectorError.html" title="enum zcash_client_backend::data_api::wallet::input_selection::InputSelectorError">InputSelectorError</a>&lt;&lt;Self::<a class="associatedtype" href="trait.ShieldingSelector.html#associatedtype.InputSource" title="type zcash_client_backend::data_api::wallet::input_selection::ShieldingSelector::InputSource">InputSource</a> as <a class="trait" href="../../trait.InputSource.html" title="trait zcash_client_backend::data_api::InputSource">InputSource</a>&gt;::<a class="associatedtype" href="../../trait.InputSource.html#associatedtype.Error" title="type zcash_client_backend::data_api::InputSource::Error">Error</a>, Self::<a class="associatedtype" href="trait.ShieldingSelector.html#associatedtype.Error" title="type zcash_client_backend::data_api::wallet::input_selection::ShieldingSelector::Error">Error</a>, ChangeT::<a class="associatedtype" href="../../../fees/trait.ChangeStrategy.html#associatedtype.Error" title="type zcash_client_backend::fees::ChangeStrategy::Error">Error</a>, <a class="enum" href="https://doc.rust-lang.org/nightly/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a>&gt;&gt;
       <span class="where">where ParamsT: Parameters,
             ChangeT: <a class="trait" href="../../../fees/trait.ChangeStrategy.html" title="trait zcash_client_backend::fees::ChangeStrategy">ChangeStrategy</a>&lt;MetaSource = Self::<a class="associatedtype" href="trait.ShieldingSelector.html#associatedtype.InputSource" title="type zcash_client_backend::data_api::wallet::input_selection::ShieldingSelector::InputSource">InputSource</a>&gt;</span>;
}</code></pre><span class="item-info"><div class="stab portability">Available on <strong>crate feature <code>transparent-inputs</code></strong> only.</div></span><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A strategy for selecting transaction inputs and proposing transaction outputs
for shielding-only transactions (transactions which spend transparent UTXOs and
send all transaction outputs to the wallet’s shielded internal address(es)).</p>
</div></details><h2 id="required-associated-types" class="section-header">Required Associated Types<a href="#required-associated-types" class="anchor">§</a></h2><div class="methods"><details class="toggle" open><summary><section id="associatedtype.Error" class="method"><a class="src rightside" href="../../../../src/zcash_client_backend/data_api/wallet/input_selection.rs.html#210">Source</a><h4 class="code-header">type <a href="#associatedtype.Error" class="associatedtype">Error</a></h4></section></summary><div class="docblock"><p>The type of errors that may be generated in input selection</p>
</div></details><details class="toggle" open><summary><section id="associatedtype.InputSource" class="method"><a class="src rightside" href="../../../../src/zcash_client_backend/data_api/wallet/input_selection.rs.html#216">Source</a><h4 class="code-header">type <a href="#associatedtype.InputSource" class="associatedtype">InputSource</a>: <a class="trait" href="../../trait.InputSource.html" title="trait zcash_client_backend::data_api::InputSource">InputSource</a></h4></section></summary><div class="docblock"><p>The type of data source that the input selector expects to access to obtain input
transparent UTXOs. This associated type permits input selectors that may use specialized
knowledge of the internals of a particular backing data store, if the generic API of
<a href="../../trait.InputSource.html" title="trait zcash_client_backend::data_api::InputSource"><code>InputSource</code></a> does not provide sufficiently fine-grained operations for a
particular backing store to optimally perform input selection.</p>
</div></details></div><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.propose_shielding" class="method"><a class="src rightside" href="../../../../src/zcash_client_backend/data_api/wallet/input_selection.rs.html#228-249">Source</a><h4 class="code-header">fn <a href="#tymethod.propose_shielding" class="fn">propose_shielding</a>&lt;ParamsT, ChangeT&gt;(
    &amp;self,
    params: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;ParamsT</a>,
    wallet_db: &amp;Self::<a class="associatedtype" href="trait.ShieldingSelector.html#associatedtype.InputSource" title="type zcash_client_backend::data_api::wallet::input_selection::ShieldingSelector::InputSource">InputSource</a>,
    change_strategy: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;ChangeT</a>,
    shielding_threshold: NonNegativeAmount,
    source_addrs: &amp;[TransparentAddress],
    to_account: &lt;Self::<a class="associatedtype" href="trait.ShieldingSelector.html#associatedtype.InputSource" title="type zcash_client_backend::data_api::wallet::input_selection::ShieldingSelector::InputSource">InputSource</a> as <a class="trait" href="../../trait.InputSource.html" title="trait zcash_client_backend::data_api::InputSource">InputSource</a>&gt;::<a class="associatedtype" href="../../trait.InputSource.html#associatedtype.AccountId" title="type zcash_client_backend::data_api::InputSource::AccountId">AccountId</a>,
    target_height: BlockHeight,
    min_confirmations: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../../../proposal/struct.Proposal.html" title="struct zcash_client_backend::proposal::Proposal">Proposal</a>&lt;&lt;ChangeT as <a class="trait" href="../../../fees/trait.ChangeStrategy.html" title="trait zcash_client_backend::fees::ChangeStrategy">ChangeStrategy</a>&gt;::<a class="associatedtype" href="../../../fees/trait.ChangeStrategy.html#associatedtype.FeeRule" title="type zcash_client_backend::fees::ChangeStrategy::FeeRule">FeeRule</a>, <a class="enum" href="https://doc.rust-lang.org/nightly/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a>&gt;, <a class="enum" href="enum.InputSelectorError.html" title="enum zcash_client_backend::data_api::wallet::input_selection::InputSelectorError">InputSelectorError</a>&lt;&lt;Self::<a class="associatedtype" href="trait.ShieldingSelector.html#associatedtype.InputSource" title="type zcash_client_backend::data_api::wallet::input_selection::ShieldingSelector::InputSource">InputSource</a> as <a class="trait" href="../../trait.InputSource.html" title="trait zcash_client_backend::data_api::InputSource">InputSource</a>&gt;::<a class="associatedtype" href="../../trait.InputSource.html#associatedtype.Error" title="type zcash_client_backend::data_api::InputSource::Error">Error</a>, Self::<a class="associatedtype" href="trait.ShieldingSelector.html#associatedtype.Error" title="type zcash_client_backend::data_api::wallet::input_selection::ShieldingSelector::Error">Error</a>, ChangeT::<a class="associatedtype" href="../../../fees/trait.ChangeStrategy.html#associatedtype.Error" title="type zcash_client_backend::fees::ChangeStrategy::Error">Error</a>, <a class="enum" href="https://doc.rust-lang.org/nightly/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a>&gt;&gt;<div class="where">where
    ParamsT: Parameters,
    ChangeT: <a class="trait" href="../../../fees/trait.ChangeStrategy.html" title="trait zcash_client_backend::fees::ChangeStrategy">ChangeStrategy</a>&lt;MetaSource = Self::<a class="associatedtype" href="trait.ShieldingSelector.html#associatedtype.InputSource" title="type zcash_client_backend::data_api::wallet::input_selection::ShieldingSelector::InputSource">InputSource</a>&gt;,</div></h4></section></summary><div class="docblock"><p>Performs input selection and returns a proposal for the construction of a shielding
transaction.</p>
<p>Implementations should return the maximum possible number of economically useful inputs
required to supply at least the requested value, choosing only inputs received at the
specified source addresses. If insufficient funds are available to satisfy the required
outputs for the shielding request, this operation must fail and return
<a href="enum.InputSelectorError.html#variant.InsufficientFunds" title="variant zcash_client_backend::data_api::wallet::input_selection::InputSelectorError::InsufficientFunds"><code>InputSelectorError::InsufficientFunds</code></a>.</p>
</div></details></div><h2 id="dyn-compatibility" class="section-header">Dyn Compatibility<a href="#dyn-compatibility" class="anchor">§</a></h2><div class="dyn-compatibility-info"><p>This trait is <b>not</b> <a href="https://doc.rust-lang.org/nightly/reference/items/traits.html#object-safety">dyn compatible</a>.</p><p><i>In older versions of Rust, dyn compatibility was called "object safety", so this trait is not object safe.</i></p></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><details class="toggle implementors-toggle"><summary><section id="impl-ShieldingSelector-for-GreedyInputSelector%3CDbT%3E" class="impl"><a class="src rightside" href="../../../../src/zcash_client_backend/data_api/wallet/input_selection.rs.html#777-867">Source</a><a href="#impl-ShieldingSelector-for-GreedyInputSelector%3CDbT%3E" class="anchor">§</a><h3 class="code-header">impl&lt;DbT: <a class="trait" href="../../trait.InputSource.html" title="trait zcash_client_backend::data_api::InputSource">InputSource</a>&gt; <a class="trait" href="trait.ShieldingSelector.html" title="trait zcash_client_backend::data_api::wallet::input_selection::ShieldingSelector">ShieldingSelector</a> for <a class="struct" href="struct.GreedyInputSelector.html" title="struct zcash_client_backend::data_api::wallet::input_selection::GreedyInputSelector">GreedyInputSelector</a>&lt;DbT&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.Error-1" class="associatedtype trait-impl"><a class="src rightside" href="../../../../src/zcash_client_backend/data_api/wallet/input_selection.rs.html#778">Source</a><a href="#associatedtype.Error-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Error" class="associatedtype">Error</a> = <a class="enum" href="enum.GreedyInputSelectorError.html" title="enum zcash_client_backend::data_api::wallet::input_selection::GreedyInputSelectorError">GreedyInputSelectorError</a></h4></section><section id="associatedtype.InputSource-1" class="associatedtype trait-impl"><a class="src rightside" href="../../../../src/zcash_client_backend/data_api/wallet/input_selection.rs.html#779">Source</a><a href="#associatedtype.InputSource-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.InputSource" class="associatedtype">InputSource</a> = DbT</h4></section></div></details></div><script src="../../../../trait.impl/zcash_client_backend/data_api/wallet/input_selection/trait.ShieldingSelector.js" async></script></section></div></main></body></html>