<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A strategy for selecting transaction inputs and proposing transaction outputs."><title>InputSelector in zcash_client_backend::data_api::wallet::input_selection - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-dbdb5eec.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="zcash_client_backend" data-themes="" data-resource-suffix="" data-rustdoc-version="1.85.0-nightly (d49be02cf 2024-12-02)" data-channel="nightly" data-search-js="search-92e6798f.js" data-settings-js="settings-0f613d39.js" ><script src="../../../../static.files/storage-59e33391.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../zcash_client_backend/index.html">zcash_<wbr>client_<wbr>backend</a><span class="version">0.15.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Input<wbr>Selector</a></h2><h3><a href="#required-associated-types">Required Associated Types</a></h3><ul class="block"><li><a href="#associatedtype.Error" title="Error">Error</a></li><li><a href="#associatedtype.InputSource" title="InputSource">InputSource</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.propose_transaction" title="propose_transaction">propose_transaction</a></li></ul><h3><a href="#dyn-compatibility">Dyn Compatibility</a></h3><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2><a href="index.html">In zcash_<wbr>client_<wbr>backend::<wbr>data_<wbr>api::<wbr>wallet::<wbr>input_<wbr>selection</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../../../index.html">zcash_client_backend</a>::<wbr><a href="../../index.html">data_api</a>::<wbr><a href="../index.html">wallet</a>::<wbr><a href="index.html">input_selection</a></span><h1>Trait <span class="trait">InputSelector</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../../src/zcash_client_backend/data_api/wallet/input_selection.rs.html#154-202">Source</a> </span></div><pre class="rust item-decl"><code>pub trait InputSelector {
    type <a href="#associatedtype.Error" class="associatedtype">Error</a>;
    type <a href="#associatedtype.InputSource" class="associatedtype">InputSource</a>: <a class="trait" href="../../trait.InputSource.html" title="trait zcash_client_backend::data_api::InputSource">InputSource</a>;

    // Required method
    fn <a href="#tymethod.propose_transaction" class="fn">propose_transaction</a>&lt;ParamsT, ChangeT&gt;(
        &amp;self,
        params: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;ParamsT</a>,
        wallet_db: &amp;Self::<a class="associatedtype" href="trait.InputSelector.html#associatedtype.InputSource" title="type zcash_client_backend::data_api::wallet::input_selection::InputSelector::InputSource">InputSource</a>,
        target_height: BlockHeight,
        anchor_height: BlockHeight,
        account: &lt;Self::<a class="associatedtype" href="trait.InputSelector.html#associatedtype.InputSource" title="type zcash_client_backend::data_api::wallet::input_selection::InputSelector::InputSource">InputSource</a> as <a class="trait" href="../../trait.InputSource.html" title="trait zcash_client_backend::data_api::InputSource">InputSource</a>&gt;::<a class="associatedtype" href="../../trait.InputSource.html#associatedtype.AccountId" title="type zcash_client_backend::data_api::InputSource::AccountId">AccountId</a>,
        transaction_request: TransactionRequest,
        change_strategy: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;ChangeT</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../../../proposal/struct.Proposal.html" title="struct zcash_client_backend::proposal::Proposal">Proposal</a>&lt;&lt;ChangeT as <a class="trait" href="../../../fees/trait.ChangeStrategy.html" title="trait zcash_client_backend::fees::ChangeStrategy">ChangeStrategy</a>&gt;::<a class="associatedtype" href="../../../fees/trait.ChangeStrategy.html#associatedtype.FeeRule" title="type zcash_client_backend::fees::ChangeStrategy::FeeRule">FeeRule</a>, &lt;Self::<a class="associatedtype" href="trait.InputSelector.html#associatedtype.InputSource" title="type zcash_client_backend::data_api::wallet::input_selection::InputSelector::InputSource">InputSource</a> as <a class="trait" href="../../trait.InputSource.html" title="trait zcash_client_backend::data_api::InputSource">InputSource</a>&gt;::<a class="associatedtype" href="../../trait.InputSource.html#associatedtype.NoteRef" title="type zcash_client_backend::data_api::InputSource::NoteRef">NoteRef</a>&gt;, <a class="enum" href="enum.InputSelectorError.html" title="enum zcash_client_backend::data_api::wallet::input_selection::InputSelectorError">InputSelectorError</a>&lt;&lt;Self::<a class="associatedtype" href="trait.InputSelector.html#associatedtype.InputSource" title="type zcash_client_backend::data_api::wallet::input_selection::InputSelector::InputSource">InputSource</a> as <a class="trait" href="../../trait.InputSource.html" title="trait zcash_client_backend::data_api::InputSource">InputSource</a>&gt;::<a class="associatedtype" href="../../trait.InputSource.html#associatedtype.Error" title="type zcash_client_backend::data_api::InputSource::Error">Error</a>, Self::<a class="associatedtype" href="trait.InputSelector.html#associatedtype.Error" title="type zcash_client_backend::data_api::wallet::input_selection::InputSelector::Error">Error</a>, ChangeT::<a class="associatedtype" href="../../../fees/trait.ChangeStrategy.html#associatedtype.Error" title="type zcash_client_backend::fees::ChangeStrategy::Error">Error</a>, &lt;Self::<a class="associatedtype" href="trait.InputSelector.html#associatedtype.InputSource" title="type zcash_client_backend::data_api::wallet::input_selection::InputSelector::InputSource">InputSource</a> as <a class="trait" href="../../trait.InputSource.html" title="trait zcash_client_backend::data_api::InputSource">InputSource</a>&gt;::<a class="associatedtype" href="../../trait.InputSource.html#associatedtype.NoteRef" title="type zcash_client_backend::data_api::InputSource::NoteRef">NoteRef</a>&gt;&gt;
       <span class="where">where ParamsT: Parameters,
             ChangeT: <a class="trait" href="../../../fees/trait.ChangeStrategy.html" title="trait zcash_client_backend::fees::ChangeStrategy">ChangeStrategy</a>&lt;MetaSource = Self::<a class="associatedtype" href="trait.InputSelector.html#associatedtype.InputSource" title="type zcash_client_backend::data_api::wallet::input_selection::InputSelector::InputSource">InputSource</a>&gt;</span>;
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A strategy for selecting transaction inputs and proposing transaction outputs.</p>
<p>Proposals should include only economically useful inputs, as determined by <code>Self::FeeRule</code>;
that is, do not return inputs that cause fees to increase by an amount greater than the value
of the input.</p>
</div></details><h2 id="required-associated-types" class="section-header">Required Associated Types<a href="#required-associated-types" class="anchor">ยง</a></h2><div class="methods"><details class="toggle" open><summary><section id="associatedtype.Error" class="method"><a class="src rightside" href="../../../../src/zcash_client_backend/data_api/wallet/input_selection.rs.html#156">Source</a><h4 class="code-header">type <a href="#associatedtype.Error" class="associatedtype">Error</a></h4></section></summary><div class="docblock"><p>The type of errors that may be generated in input selection</p>
</div></details><details class="toggle" open><summary><section id="associatedtype.InputSource" class="method"><a class="src rightside" href="../../../../src/zcash_client_backend/data_api/wallet/input_selection.rs.html#163">Source</a><h4 class="code-header">type <a href="#associatedtype.InputSource" class="associatedtype">InputSource</a>: <a class="trait" href="../../trait.InputSource.html" title="trait zcash_client_backend::data_api::InputSource">InputSource</a></h4></section></summary><div class="docblock"><p>The type of data source that the input selector expects to access to obtain input notes.
This associated type permits input selectors that may use specialized knowledge of the
internals of a particular backing data store, if the generic API of <code>InputSource</code> does not
provide sufficiently fine-grained operations for a particular backing store to optimally
perform input selection.</p>
</div></details></div><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">ยง</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.propose_transaction" class="method"><a class="src rightside" href="../../../../src/zcash_client_backend/data_api/wallet/input_selection.rs.html#181-201">Source</a><h4 class="code-header">fn <a href="#tymethod.propose_transaction" class="fn">propose_transaction</a>&lt;ParamsT, ChangeT&gt;(
    &amp;self,
    params: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;ParamsT</a>,
    wallet_db: &amp;Self::<a class="associatedtype" href="trait.InputSelector.html#associatedtype.InputSource" title="type zcash_client_backend::data_api::wallet::input_selection::InputSelector::InputSource">InputSource</a>,
    target_height: BlockHeight,
    anchor_height: BlockHeight,
    account: &lt;Self::<a class="associatedtype" href="trait.InputSelector.html#associatedtype.InputSource" title="type zcash_client_backend::data_api::wallet::input_selection::InputSelector::InputSource">InputSource</a> as <a class="trait" href="../../trait.InputSource.html" title="trait zcash_client_backend::data_api::InputSource">InputSource</a>&gt;::<a class="associatedtype" href="../../trait.InputSource.html#associatedtype.AccountId" title="type zcash_client_backend::data_api::InputSource::AccountId">AccountId</a>,
    transaction_request: TransactionRequest,
    change_strategy: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;ChangeT</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../../../proposal/struct.Proposal.html" title="struct zcash_client_backend::proposal::Proposal">Proposal</a>&lt;&lt;ChangeT as <a class="trait" href="../../../fees/trait.ChangeStrategy.html" title="trait zcash_client_backend::fees::ChangeStrategy">ChangeStrategy</a>&gt;::<a class="associatedtype" href="../../../fees/trait.ChangeStrategy.html#associatedtype.FeeRule" title="type zcash_client_backend::fees::ChangeStrategy::FeeRule">FeeRule</a>, &lt;Self::<a class="associatedtype" href="trait.InputSelector.html#associatedtype.InputSource" title="type zcash_client_backend::data_api::wallet::input_selection::InputSelector::InputSource">InputSource</a> as <a class="trait" href="../../trait.InputSource.html" title="trait zcash_client_backend::data_api::InputSource">InputSource</a>&gt;::<a class="associatedtype" href="../../trait.InputSource.html#associatedtype.NoteRef" title="type zcash_client_backend::data_api::InputSource::NoteRef">NoteRef</a>&gt;, <a class="enum" href="enum.InputSelectorError.html" title="enum zcash_client_backend::data_api::wallet::input_selection::InputSelectorError">InputSelectorError</a>&lt;&lt;Self::<a class="associatedtype" href="trait.InputSelector.html#associatedtype.InputSource" title="type zcash_client_backend::data_api::wallet::input_selection::InputSelector::InputSource">InputSource</a> as <a class="trait" href="../../trait.InputSource.html" title="trait zcash_client_backend::data_api::InputSource">InputSource</a>&gt;::<a class="associatedtype" href="../../trait.InputSource.html#associatedtype.Error" title="type zcash_client_backend::data_api::InputSource::Error">Error</a>, Self::<a class="associatedtype" href="trait.InputSelector.html#associatedtype.Error" title="type zcash_client_backend::data_api::wallet::input_selection::InputSelector::Error">Error</a>, ChangeT::<a class="associatedtype" href="../../../fees/trait.ChangeStrategy.html#associatedtype.Error" title="type zcash_client_backend::fees::ChangeStrategy::Error">Error</a>, &lt;Self::<a class="associatedtype" href="trait.InputSelector.html#associatedtype.InputSource" title="type zcash_client_backend::data_api::wallet::input_selection::InputSelector::InputSource">InputSource</a> as <a class="trait" href="../../trait.InputSource.html" title="trait zcash_client_backend::data_api::InputSource">InputSource</a>&gt;::<a class="associatedtype" href="../../trait.InputSource.html#associatedtype.NoteRef" title="type zcash_client_backend::data_api::InputSource::NoteRef">NoteRef</a>&gt;&gt;<div class="where">where
    ParamsT: Parameters,
    ChangeT: <a class="trait" href="../../../fees/trait.ChangeStrategy.html" title="trait zcash_client_backend::fees::ChangeStrategy">ChangeStrategy</a>&lt;MetaSource = Self::<a class="associatedtype" href="trait.InputSelector.html#associatedtype.InputSource" title="type zcash_client_backend::data_api::wallet::input_selection::InputSelector::InputSource">InputSource</a>&gt;,</div></h4></section></summary><div class="docblock"><p>Performs input selection and returns a proposal for transaction construction including
change and fee outputs.</p>
<p>Implementations of this method should return inputs sufficient to satisfy the given
transaction request using a best-effort strategy to preserve user privacy, as follows:</p>
<ul>
<li>If it is possible to satisfy the specified transaction request by creating
a fully-shielded transaction without requiring value to cross pool boundaries,
return the inputs necessary to construct such a transaction; otherwise</li>
<li>If it is possible to satisfy the transaction request by creating a fully-shielded
transaction with some amounts crossing between shielded pools, return the inputs
necessary.</li>
</ul>
<p>If insufficient funds are available to satisfy the required outputs for the shielding
request, this operation must fail and return <a href="enum.InputSelectorError.html#variant.InsufficientFunds" title="variant zcash_client_backend::data_api::wallet::input_selection::InputSelectorError::InsufficientFunds"><code>InputSelectorError::InsufficientFunds</code></a>.</p>
</div></details></div><h2 id="dyn-compatibility" class="section-header">Dyn Compatibility<a href="#dyn-compatibility" class="anchor">ยง</a></h2><div class="dyn-compatibility-info"><p>This trait is <b>not</b> <a href="https://doc.rust-lang.org/nightly/reference/items/traits.html#object-safety">dyn compatible</a>.</p><p><i>In older versions of Rust, dyn compatibility was called "object safety", so this trait is not object safe.</i></p></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">ยง</a></h2><div id="implementors-list"><details class="toggle implementors-toggle"><summary><section id="impl-InputSelector-for-GreedyInputSelector%3CDbT%3E" class="impl"><a class="src rightside" href="../../../../src/zcash_client_backend/data_api/wallet/input_selection.rs.html#364-774">Source</a><a href="#impl-InputSelector-for-GreedyInputSelector%3CDbT%3E" class="anchor">ยง</a><h3 class="code-header">impl&lt;DbT: <a class="trait" href="../../trait.InputSource.html" title="trait zcash_client_backend::data_api::InputSource">InputSource</a>&gt; <a class="trait" href="trait.InputSelector.html" title="trait zcash_client_backend::data_api::wallet::input_selection::InputSelector">InputSelector</a> for <a class="struct" href="struct.GreedyInputSelector.html" title="struct zcash_client_backend::data_api::wallet::input_selection::GreedyInputSelector">GreedyInputSelector</a>&lt;DbT&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.Error-1" class="associatedtype trait-impl"><a class="src rightside" href="../../../../src/zcash_client_backend/data_api/wallet/input_selection.rs.html#365">Source</a><a href="#associatedtype.Error-1" class="anchor">ยง</a><h4 class="code-header">type <a href="#associatedtype.Error" class="associatedtype">Error</a> = <a class="enum" href="enum.GreedyInputSelectorError.html" title="enum zcash_client_backend::data_api::wallet::input_selection::GreedyInputSelectorError">GreedyInputSelectorError</a></h4></section><section id="associatedtype.InputSource-1" class="associatedtype trait-impl"><a class="src rightside" href="../../../../src/zcash_client_backend/data_api/wallet/input_selection.rs.html#366">Source</a><a href="#associatedtype.InputSource-1" class="anchor">ยง</a><h4 class="code-header">type <a href="#associatedtype.InputSource" class="associatedtype">InputSource</a> = DbT</h4></section></div></details></div><script src="../../../../trait.impl/zcash_client_backend/data_api/wallet/input_selection/trait.InputSelector.js" async></script></section></div></main></body></html>